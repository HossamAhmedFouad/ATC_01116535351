<div class="dashboard-container">
  <div class="dashboard-content">
    <section class="stats-section">
      <mat-card class="stats-card">
        <mat-card-content>
          <div class="stats-grid">
            <div class="stat-item">
              <mat-icon>event</mat-icon>
              <div class="stat-info">
                <span class="stat-value">{{ eventStats.totalEvents }}</span>
                <span class="stat-label">Total Events</span>
              </div>
            </div>
            <div class="stat-item">
              <mat-icon>upcoming</mat-icon>
              <div class="stat-info">
                <span class="stat-value">{{ eventStats.upcomingEvents }}</span>
                <span class="stat-label">Upcoming</span>
              </div>
            </div>
            <div class="stat-item">
              <mat-icon>check_circle</mat-icon>
              <div class="stat-info">
                <span class="stat-value">{{ eventStats.completedEvents }}</span>
                <span class="stat-label">Completed</span>
              </div>
            </div>
            <div class="stat-item">
              <mat-icon>attach_money</mat-icon>
              <div class="stat-info">
                <span class="stat-value">{{ formatCurrency(eventStats.totalSpent) }}</span>
                <span class="stat-label">Total Spent</span>
              </div>
            </div>
          </div>
        </mat-card-content>
      </mat-card>
    </section>

    <section class="calendar-events-section">
      <div class="calendar-container">
        <mat-card>
          <mat-card-header>
            <mat-card-title>
              <mat-icon>calendar_today</mat-icon>
              Your Events Calendar
              <button mat-button color="primary" (click)="goToToday()" class="today-button">
                <mat-icon>today</mat-icon>
                Today
              </button>
            </mat-card-title>
          </mat-card-header>
          <mat-card-content>
            <mat-calendar
              #calendar
              [selected]="selectedDate"
              (selectedChange)="onDateSelected($event)"
              [dateClass]="hasEventsOnDate"
              [minDate]="minDate"
              [maxDate]="maxDate"
              class="custom-calendar"
              tabindex="0">
            </mat-calendar>
          </mat-card-content>
        </mat-card>
      </div>

      <div class="events-container">
        <mat-card>
          <mat-card-header>
            <mat-card-title>
              <mat-icon>event</mat-icon>
              Scheduled Events
              <span *ngIf="isDateFiltered" class="date-filter-info">
                {{ selectedDate | date:'mediumDate' }}
                <button mat-icon-button (click)="clearDateFilter()" matTooltip="Clear date filter">
                  <mat-icon>close</mat-icon>
                </button>
              </span>
            </mat-card-title>
            <div class="category-filter">
              <button mat-raised-button
                *ngFor="let category of categories"
                [class.active]="selectedCategory === category"
                (click)="filterEventsByCategory(category)">
                {{ category }}
              </button>
            </div>
          </mat-card-header>
          <mat-card-content>
            <div class="events-list">
              <mat-card *ngFor="let event of getPaginatedEvents()" class="event-card">
                <mat-card-header>
                  <mat-card-title>{{ event.title }}</mat-card-title>
                  <mat-card-subtitle>
                    <span class="event-status" [class]="getEventStatusClass(event.status)">
                      <mat-icon>{{ getStatusIcon(event.status) }}</mat-icon>
                      <span class="status-text">{{ event.status | titlecase }}</span>
                    </span>
                  </mat-card-subtitle>
                </mat-card-header>
                <mat-card-content>
                  <div class="event-info">
                    <p>
                      <mat-icon>calendar_month</mat-icon>
                      {{ formatDate(event.date) }}
                    </p>
                    <p>
                      <mat-icon>schedule</mat-icon>
                      {{ formatTime(event.date) }}
                    </p>
                    <p>
                      <mat-icon>place</mat-icon>
                      {{ event.location }}
                    </p>
                    <p>
                      <mat-icon>local_activity</mat-icon>
                      {{ event.ticketType }}
                    </p>
                    <p>
                      <mat-icon>payments</mat-icon>
                      {{ formatCurrency(event.price) }}
                    </p>
                    <p>
                      <mat-icon>label</mat-icon>
                      {{ event.category }}
                    </p>
                    <p>
                      <mat-icon>people</mat-icon>
                      {{ event.attendees }} attendees
                    </p>
                    <p>
                      <mat-icon>business</mat-icon>
                      {{ event.organizer }}
                    </p>
                  </div>
                  <p class="event-description">{{ event.description }}</p>
                </mat-card-content>
                <mat-card-actions>
                  <button mat-raised-button color="primary" [routerLink]="['/events', event.id]">
                    <mat-icon>visibility</mat-icon>
                    View Details
                  </button>
                  <button mat-raised-button color="warn" *ngIf="event.status === 'upcoming'" (click)="cancelEvent(event)">
                    <mat-icon>cancel</mat-icon>
                    Cancel Booking
                  </button>
                </mat-card-actions>
              </mat-card>
            </div>

            <div class="pagination-controls">
              <button mat-button (click)="previousPage()" [disabled]="currentPage === 1">
                <mat-icon>chevron_left</mat-icon>
                Previous
              </button>
              <span class="pagination-info">
                Page {{ currentPage }} of {{ totalPages }}
              </span>
              <button mat-button (click)="nextPage()" [disabled]="currentPage === totalPages">
                Next
                <mat-icon>chevron_right</mat-icon>
              </button>
            </div>
          </mat-card-content>
        </mat-card>
      </div>
    </section>
  </div>
</div> 